import{d as b,x as c,v as G,c as h,w as a,a as e,N as S,e as t,g as N,f as C,k as B,l as g,m as F,n as u,q as n,z as V,A as _,C as I,D as L,E as q,t as f,F as R,G as w,B as k,j as T,r as U,b as j,o as v}from"./index-DSUmWsdk.js";import{u as z,S as E}from"./StepsNav-CcN6bEz1.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";const M=b({__name:"GoalSettingView",setup(A){const d=j(),s=z(),p=c(null),l=G({targetWeight:s.userData.targetWeight||(s.userData.weight?s.userData.weight+1:null)||null,timeframe:s.userData.timeframe||8}),y={targetWeight:[{type:"number",min:s.userData.weight?s.userData.weight+1:45,message:"目标体重必须大于当前体重",trigger:["blur","change"]},{type:"number",max:150,message:"目标体重不能超过150kg",trigger:["blur","change"]}]},D=o=>{var r;o.preventDefault(),(r=p.value)==null||r.validate(i=>{i||(s.updateGoalSettings({targetWeight:l.targetWeight,timeframe:l.timeframe}),d.push("/plan-generation"))})},W=()=>{d.push("/user-info")},m=c(0),x=()=>{if(l.targetWeight&&s.userData.weight){const o=l.targetWeight-s.userData.weight,r=s.calculateWeeklyGainGoal();m.value=Math.ceil(o/r),l.timeframe!==m.value&&(l.timeframe=m.value)}};return(o,r)=>(v(),h(e(S),{class:"layout"},{default:a(()=>[t(e(C),{class:"header"},{default:a(()=>r[2]||(r[2]=[N("div",{class:"header-content"},[N("h1",{class:"logo"},"增重计划助手")],-1)])),_:1}),t(e(T),{class:"content"},{default:a(()=>[t(e(B),{class:"form-card"},{default:a(()=>[t(e(g),{vertical:"",size:"large"},{default:a(()=>[t(E,{current:2}),t(e(F),null,{default:a(()=>r[3]||(r[3]=[u("设定增重目标")])),_:1}),t(e(n),{depth:"3"},{default:a(()=>r[4]||(r[4]=[u("请设置您的目标体重和期望达成的时间")])),_:1}),t(e(V),{ref_key:"formRef",ref:p,model:l,rules:y,"label-placement":"left","label-width":"100px","require-mark-placement":"right-hanging"},{default:a(()=>[t(e(_),{label:"目标体重 (kg)",path:"targetWeight",required:""},{default:a(()=>[t(e(I),{value:l.targetWeight,"onUpdate:value":[r[0]||(r[0]=i=>l.targetWeight=i),x],min:e(s).userData.weight?e(s).userData.weight+1:45,max:150,placeholder:"请输入目标体重",style:{width:"100%"}},null,8,["value","min"])]),_:1}),t(e(_),{label:"期望时间 (周)",path:"timeframe"},{default:a(()=>[t(e(g),{vertical:""},{default:a(()=>[t(e(L),{value:l.timeframe,"onUpdate:value":r[1]||(r[1]=i=>l.timeframe=i),min:4,max:24,step:1,marks:{4:"4周",8:"8周",12:"12周",16:"16周",20:"20周",24:"24周"}},null,8,["value"]),t(e(g),{justify:"space-between"},{default:a(()=>[t(e(n),null,{default:a(()=>[u(f(l.timeframe)+"周",1)]),_:1}),e(s).userData.weight&&l.targetWeight?(v(),h(e(n),{key:0},{default:a(()=>[u(" 预计每周增重: "+f(((l.targetWeight-e(s).userData.weight)/l.timeframe).toFixed(2))+"kg ",1)]),_:1})):q("",!0)]),_:1})]),_:1})]),_:1}),t(e(R),{cols:24,"x-gap":12},{default:a(()=>[t(e(w),{span:12},{default:a(()=>[t(e(k),{block:"",onClick:W},{default:a(()=>r[5]||(r[5]=[u("返回")])),_:1})]),_:1}),t(e(w),{span:12},{default:a(()=>[t(e(k),{type:"primary",block:"",onClick:D},{default:a(()=>r[6]||(r[6]=[u("下一步")])),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),_:1}),t(e(U),{class:"footer"},{default:a(()=>[t(e(n),null,{default:a(()=>[u("© "+f(new Date().getFullYear())+" 增重计划助手 | 专业健康增重方案",1)]),_:1})]),_:1})]),_:1}))}}),O=H(M,[["__scopeId","data-v-98e6a374"]]);export{O as default};
